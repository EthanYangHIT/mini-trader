(function(){"use strict";self.importScripts("https://cdn.jsdelivr.net/npm/decimal.js@10.4.3/decimal.min.js"),self.onmessage=function(n){const{tradeHistory:o,symbol:m}=n.data;let s=new self.Decimal(0),t=new self.Decimal(0),l=new self.Decimal(0);for(const e of o)e.symbol===m&&(e.side==="buy"?(s=s.plus(new self.Decimal(e.amount)),l=l.plus(new self.Decimal(e.amount).times(e.price))):e.side==="sell"&&(t=t.plus(new self.Decimal(e.amount))));const i=s.minus(t),a={amount:i.gt(0)?i.toNumber():0,avgPrice:i.gt(0)?l.div(s).toNumber():0};self.postMessage(a)}})();
